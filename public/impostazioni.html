<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Silex v3.6.1">
    <link rel="stylesheet" href="css/impostazioni.css" />
    <link rel="stylesheet" href="css/style.css" />





    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Manrope&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
</head>

<body class="sfondo">
    <div class="box_titolo titolo" data-lingua="titolo_impostazioni"></div>
    

    <a href="pagina-impianto.html" class="testo_impostazioni" id="torna_indietro" data-lingua="torna_indietro"></a>

    <div class="card">
        <div class="testo_impostazioni blocco_impostazioni" data-lingua="tema"></div>
        <input type="checkbox" class="chk" id="chk_tema" />
    </div>


    <!--Selezione Lingua-->
    <div class="card">
        <div class="testo_impostazioni blocco_impostazioni" data-lingua="lingua"></div>
        <select class="menu_tendina" id="menu_tendina">
            <option value="it">Italiano</option>
            <option value="en">English</option>
            <option value="de">Deutsche</option>
        </select>
    </div>


    <!-- Impostazioni notifiche-->
    <div class="card">

        <!-- Abilita/Disabilita news -->
        <div>
            <div class="testo_impostazioni blocco_impostazioni" data-lingua="notifiche"></div>
            <input type="checkbox" class="chk" />
        </div>

        <!-- Soglie consumi -->
        <div>
            <div class="testo_impostazioni blocco_impostazioni" data-lingua="soglia"></div>
            <input type="checkbox" id="chk_soglia" class="chk" />
            <input type="number" id="txt_soglia" />
        </div>
    </div>

    <!-- Log out -->
    <div class="card blocco_impostazioni">
        <div class="testo_impostazioni blocco_impostazioni">
            <b onclick="LogOut();" data-lingua="logout"></b>
        </div>
    </div>




</body>

<script src="scripts/translations.js"></script>
<script>
    let apiUrl = (window.location.hostname === "localhost") ? "http://localhost:8080" : "https://ecotn-5fc1.onrender.com";
    const toggle = document.getElementById("chk_tema");

    // carica preferenza
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark") {
        document.body.classList.add("dark");
        toggle.checked = true;
    }

    toggle.addEventListener("change", () => {
        if (toggle.checked) {
            document.body.classList.add("dark");
            localStorage.setItem("theme", "dark");
        } else {
            document.body.classList.remove("dark");
            localStorage.setItem("theme", "light");
        }
    });

    function LogOut() {
        localStorage.clear();
        // window.location.href = 'login.html';
        window.location.href = apiUrl + "/api/v1/spid/logout";
    }


    const languageSelector = document.getElementById("menu_tendina");

    // carica lingua salvata
    cambiaLingua();

    // cambio lingua
    languageSelector.addEventListener("change", (e) => {
        localStorage.setItem("lingua", e.target.value);
        cambiaLingua();
    });



</script>

</html>